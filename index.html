<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Undangan Pernikahan | Pramudya & Feristina</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@300;400;700&display=swap");

      :root {
        --primary-color: #b8938e; /* Dusty Rose */
        --primary-color-dark: #a17a74; /* Darker Dusty Rose */
        --accent-color: #c9b474; /* Soft Gold */
        --text-color: #4a4a4a; /* Soft Charcoal */
        --background-color: #f5f9fd; /* Warm Off-white */
        --animation-duration: 0.8s;
        --font-heading: "Great Vibes", cursive;
        --font-body: "Quicksand", sans-serif;
      }

      body {
        font-family: var(--font-body);
        margin: 0;
        padding: 0;
        background-color: var(--background-color);
        background-image: url("https://www.toptal.com/designers/subtlepatterns/uploads/double-bubble-outline.png");
        color: var(--text-color);
        overflow-x: hidden;
        font-size: 18px;
        line-height: 1.7;
        font-weight: 400;
        overflow-y: hidden; /* Hide scrollbar initially */
      }

      /* === REMOVE MOBILE TAP HIGHLIGHT === */
      button, a, [onclick] {
        -webkit-tap-highlight-color: transparent;
      }

      /* === ORIENTATION LOCK OVERLAY === */
      #orientation-lock-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: var(--background-color);
        z-index: 30000;
        display: none; /* Hidden by default */
        justify-content: center;
        align-items: center;
        text-align: center;
        color: var(--text-color);
        padding: 20px;
        box-sizing: border-box;
      }
      .orientation-overlay-content {
        font-family: var(--font-body);
      }
      .orientation-overlay-content h3 {
        font-family: var(--font-heading);
        font-size: 3rem;
        color: var(--primary-color);
        margin-bottom: 15px;
        font-weight: normal;
      }
      .orientation-overlay-content p {
        font-size: 1.1rem;
        line-height: 1.5;
        max-width: 90%;
        margin: 0 auto;
      }
      
      /* Show the overlay only on landscape phone-sized devices */
      @media (orientation: landscape) and (max-width: 900px) {
        #orientation-lock-overlay {
          display: flex;
        }
      }

      /* === GOLDEN HOUR LOADING SCREEN STYLES === */
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 20000;
        display: flex;
        justify-content: center;
        align-items: center;
        background: radial-gradient(circle, #ffdf85 0%, #ffb45b 40%, #e18c48 100%);
        transition: opacity 1.5s ease-out;
        color: white;
        text-align: center;
      }

      #loading-screen.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .loader-monogram {
        font-family: var(--font-heading);
        font-size: 6rem;
        line-height: 1;
        text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        animation: pulse-text 2.5s infinite ease-in-out;
      }

      .loader-text {
        font-family: var(--font-body);
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 5px;
        margin-top: 15px;
        opacity: 0.8;
        animation: fade-in-out 2.5s infinite ease-in-out;
      }
      
      @keyframes pulse-text {
        0% { transform: scale(1); opacity: 0.8; }
        50% { transform: scale(1.05); opacity: 1; }
        100% { transform: scale(1); opacity: 0.8; }
      }

      @keyframes fade-in-out {
        0% { opacity: 0.6; }
        50% { opacity: 0.9; }
        100% { opacity: 0.6; }
      }

      /* === SPLASH SCREEN STYLES === */
      #splash-screen {
        opacity: 0;
        transition: opacity 1s ease-in;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 10000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white;
        background: url("https://images.unsplash.com/photo-1523438885239-a2751b3a1673?q=80&w=2070&auto=format=fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D")
          no-repeat center center/cover;
      }
      #splash-screen.fade-out {
        opacity: 0 !important;
        transform: scale(1.1);
        pointer-events: none;
        transition: opacity 1s ease-out 0.5s, transform 1s ease-out 0.5s;
      }

      #splash-screen::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
      }
      .splash-content {
        position: relative;
        z-index: 1;
        padding: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      @keyframes splashFadeInUp {
        from { opacity: 0; transform: translateY(40px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }

      .splash-content > * {
        opacity: 0;
        animation: splashFadeInUp 0.9s cubic-bezier(0.23, 1, 0.32, 1) both;
      }
      
      .splash-quote { animation-delay: 0.2s; }
      .splash-content h2 { animation-delay: 0.4s; }
      .guest-name-wrapper { animation-delay: 0.5s; }
      .splash-content p:not(.splash-translation) { animation-delay: 0.6s; }
      #open-invitation-btn { animation-delay: 0.8s; }

      .splash-content.closing > * {
        transition: opacity 0.5s ease-in, transform 0.5s ease-in;
        opacity: 0;
        transform: translateY(-40px);
      }
      .splash-content.closing .splash-quote { transition-delay: 0s; }
      .splash-content.closing h2 { transition-delay: 0.1s; }
      .splash-content.closing #open-invitation-btn { transition-delay: 0.2s; }
      
      .splash-quote {
        border: none;
        padding: 0 15px;
        margin: 30px auto 0 auto;
        max-width: 550px;
      }
      .splash-arabic {
        font-family: 'Times New Roman', Times, serif;
        font-size: 1.6rem;
        margin-bottom: 15px;
        line-height: 1.8;
      }
      .splash-translation {
        font-size: 0.95rem;
        font-style: italic;
        line-height: 1.6;
        opacity: 0.95;
        max-width: 500px;
        margin: 0 auto;
      }

      .splash-content h2 {
        font-family: var(--font-body);
        font-size: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 4px;
        font-weight: 300;
        margin: 0 0 20px;
      }
      .guest-name-wrapper h3:first-child {
        font-family: var(--font-body);
        font-size: 1.1rem;
        font-weight: 400;
        text-transform: none;
        letter-spacing: 1px;
        margin: 0;
      }
      .guest-name {
        font-family: var(--font-body);
        font-size: 1.8rem;
        font-weight: 700;
        margin: 10px 0 20px 0;
      }
      .splash-content p {
        font-family: var(--font-body);
        font-size: 1rem;
        margin: 0 auto 30px;
        max-width: 450px;
        line-height: 1.6;
      }
      .splash-content h1 {
        font-family: var(--font-heading);
        font-weight: normal;
        font-size: 8rem;
        margin: 0 0 40px;
        line-height: 1;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
      }
      #open-invitation-btn {
        font-family: var(--font-body);
        font-weight: bold;
        font-size: 1rem;
        color: white;
        background-color: transparent;
        border: 2px solid white;
        padding: 15px 35px;
        border-radius: 50px;
        text-transform: uppercase;
        letter-spacing: 2px;
        cursor: pointer;
        transition: background-color 0.4s ease, color 0.4s ease;
      }
      #open-invitation-btn:hover {
        background-color: white;
        color: var(--text-color);
      }
      
      #main-content {
        display: none;
        opacity: 0;
        transition: opacity 1.5s ease-in 0.5s;
      }
      #main-content.visible { opacity: 1; }

      /* === MUSIC CONTROL STYLES === */
      .music-control {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      #music-toggle-btn {
        width: 60px;
        height: 60px;
        background: radial-gradient( circle, hsl(45, 100%, 80%), hsl(35, 100%, 70%) );
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
        position: relative;
        box-shadow: 0 0 20px 5px hsla(35, 100%, 70%, 0.5);
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        overflow: hidden;
      }
      #music-toggle-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 0 25px 8px hsla(35, 100%, 65%, 0.7);
      }
      .album-art-spinner {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background: url('https://images.unsplash.com/photo-1523438885239-a2751b3a1673?q=80&w=200&auto=format=fit=crop') center center/cover;
        border-radius: 50%;
        animation: spin 8s linear infinite;
        animation-play-state: paused;
        z-index: 1;
      }
      .sun-rays {
        position: absolute;
        top: -25%;
        left: -25%;
        width: 150%;
        height: 150%;
        background-image: conic-gradient(
          hsla(45, 100%, 70%, 0.7) 0deg 15deg, transparent 15deg 60deg,
          hsla(45, 100%, 70%, 0.7) 60deg 75deg, transparent 75deg 120deg,
          hsla(45, 100%, 70%, 0.7) 120deg 135deg, transparent 135deg 180deg,
          hsla(45, 100%, 70%, 0.7) 180deg 195deg, transparent 195deg 240deg,
          hsla(45, 100%, 70%, 0.7) 240deg 255deg, transparent 255deg 300deg,
          hsla(45, 100%, 70%, 0.7) 300deg 315deg, transparent 315deg 360deg
        );
        z-index: 0;
        opacity: 0;
        transition: opacity 0.5s ease;
        animation: spin 25s linear infinite;
        animation-play-state: paused;
      }
      .music-icon-wrapper {
        position: relative;
        width: 26px;
        height: 26px;
        z-index: 2;
        filter: drop-shadow(0 0 3px rgba(0,0,0,0.5));
      }
      .music-icon-wrapper .icon {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        fill: white;
        transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease;
      }
      #icon-playing { opacity: 0; transform: scale(0.5) rotate(-90deg); }
      #icon-paused { transform: scale(1) rotate(0deg); }
      #music-toggle-btn.is-playing { animation: pulse-glow 2s infinite; }
      #music-toggle-btn.is-playing .album-art-spinner,
      #music-toggle-btn.is-playing .sun-rays { animation-play-state: running; }
      #music-toggle-btn.is-playing .sun-rays { opacity: 1; }
      #music-toggle-btn.is-playing #icon-playing { opacity: 1; transform: scale(1) rotate(0deg); }
      #music-toggle-btn.is-playing #icon-paused { opacity: 0; transform: scale(0.5) rotate(90deg); }
      @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      @keyframes pulse-glow {
        0% { box-shadow: 0 0 20px 5px hsla(35, 100%, 70%, 0.5); }
        50% { box-shadow: 0 0 25px 10px hsla(35, 100%, 70%, 0.8); }
        100% { box-shadow: 0 0 20px 5px hsla(35, 100%, 70%, 0.5); }
      }
      .song-info {
        display: flex;
        flex-direction: column;
        opacity: 0;
        transform: translateX(-20px);
        animation: heroContentFadeIn 1.5s ease-out 2.5s both;
      }
      .song-name { margin: 0; color: #383838; font-size: 0.85rem; font-weight: bold; text-shadow: 1px 1px 2px rgba(255,255,255,0.7); line-height: 1.2; }
      .song-artist { margin: 0; color: #6a6a6a; font-size: 0.75rem; text-shadow: 1px 1px 2px rgba(255,255,255,0.7); }

      /* === HERO SECTION STYLES === */
      .hero {
        position: relative;
        min-height: 100vh; /* Changed for responsiveness */
        height: auto; /* Changed for responsiveness */
        color: #4a3728;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        background: radial-gradient( circle at center, #fffbeb 0%, #fdf5a6 20%, #e6c66e 60%, #d4af37 100% );
        background-size: 200% 200%;
        background-position: center center;
        animation: goldPulse 12s ease-in-out infinite;
        padding: 40px 20px; /* Added padding */
        box-sizing: border-box; /* Added for better padding calculation */
      }
      .hero::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 80vh;
        height: 80vh;
        background-image: url('data/image/sun.png');
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        transform-origin: center center;
        z-index: 1;
        animation: sunPulse 120s linear infinite;
      }
      .cloud { position: absolute; background-image: url('data/image/Cloud.png'); background-size: contain; background-repeat: no-repeat; mix-blend-mode: screen; z-index: 2; }
      .cloud.c1 { width: 250px; height: 100px; top: 10%; left: -300px; opacity: 0.6; animation: move-clouds 50s linear infinite 0s, cloudBob 15s ease-in-out infinite alternate; }
      .cloud.c2 { width: 350px; height: 140px; top: 20%; left: -400px; opacity: 0.5; animation: move-clouds 70s linear infinite 5s, cloudBob 18s ease-in-out infinite alternate 2s; }
      .cloud.c3 { width: 200px; height: 80px; top: 8%; left: -250px; opacity: 0.4; animation: move-clouds 60s linear infinite 8s, cloudBob 12s ease-in-out infinite alternate 1s; }
      .cloud.c4 { width: 400px; height: 160px; top: 15%; left: -450px; opacity: 0.55; animation: move-clouds 80s linear infinite 12s, cloudBob 20s ease-in-out infinite alternate 3s; }
      .hero-content { position: relative; z-index: 3; padding: 20px; }
      @keyframes heroContentFadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
      .hero-content > * { animation: heroContentFadeIn 1.5s ease-out 0.5s both; }
      .hero-content .bismillah { animation-delay: 0.5s; }
      .hero-content p:nth-of-type(2) { animation-delay: 0.7s; }
      .hero-content h1 { animation-delay: 0.9s; }
      .hero-content p:last-of-type { animation-delay: 1.1s; }
      #countdown { animation-delay: 1.3s; }
      
      .bismillah {
        font-family: 'Times New Roman', Times, serif;
        font-size: 2.5rem;
        margin: 0 0 25px 0;
        letter-spacing: 0;
        text-transform: none;
      }
      .mobile-break {
        display: none;
      }
      h1, h2, h3, h4 { font-family: var(--font-heading); font-weight: normal; }
      h1 { font-size: 9rem; line-height: 1; margin: 0; text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.4); }
      .hero p { font-family: var(--font-body); font-size: 1.8rem; margin: 15px 0 40px; text-transform: uppercase; letter-spacing: 4px; font-weight: 300; }
      #countdown { font-size: 3rem; display: flex; justify-content: center; gap: 30px; margin-top: 30px; font-family: var(--font-body); font-weight: 300; }
      #countdown div { text-align: center; background: rgba(255, 255, 255, 0.2); padding: 15px 25px; border-radius: 10px; min-width: 100px; border: 1px solid rgba(255, 255, 255, 0.3); }
      #countdown span { display: block; font-size: 1.1rem; text-transform: uppercase; margin-top: 10px; letter-spacing: 2px; }
      
      /* === GENERAL SECTION STYLES === */
      .section { 
        padding: 80px 20px;
        text-align: center; 
        position: relative; 
        z-index: 1;
        background-color: transparent;
        overflow: hidden; /* Prevent floral decorations from creating scrollbars */
      }
      .section h2 { font-size: 6.5rem; margin-bottom: 20px; color: var(--primary-color); }
      .heading-divider { 
        width: 480px;
        height: 155px;
        background-image: url('data/image/HrFlower.png'); 
        background-size: contain; 
        background-repeat: no-repeat; 
        background-position: center; 
        background-color: transparent; 
        margin: 0 auto 40px auto; 
        border: 0; 
        animation: sway 7s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate;
      }
      @keyframes sway { 
        from { transform: rotate(-5deg); } 
        to { transform: rotate(5deg); } 
      }
      .container { max-width: 960px; margin: 0 auto; position: relative; z-index: 2; }
      .container p { font-size: 1.2rem; max-width: 800px; margin-left: auto; margin-right: auto; }

      /* === "KISAH KAMI" SECTION - DESKTOP STYLES === */
      .couple-details {
        display: flex;
        margin-bottom: 20px;
      }
      .couple-details .person-details {
        flex-basis: 46%;
      }
      .couple-details .person-details h3 {
        font-size: 5rem;
        color: var(--primary-color-dark);
        margin: 0 0 10px;
        font-family: var(--font-heading);
      }
      .couple-details .son-daughter-of {
        font-size: 1.1rem;
        margin: 0;
      }
      .couple-details .ampersand {
        font-family: var(--font-heading);
        font-size: 5rem;
        color: var(--accent-color);
        line-height: 1;
        flex-basis: 8%;
        align-self: center;
      }
      .couple-details .groom-details { text-align: right; }
      .couple-details .bride-details { text-align: left; }
      
      .couple-images {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 50px;
      }
      .couple-img {
        width: 250px;
        height: 250px;
        border-radius: 50%;
        object-fit: cover;
        border: 8px solid #fff;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
      }
      .couple-img:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }
      .couple-img.mobile-only {
          display: none;
      }
      
      /* === FORM STYLES === */
      .rsvp-form { max-width: 600px; margin: 40px auto 0; text-align: left; }
      .form-group { margin-bottom: 25px; }
      .form-group label { display: block; font-family: var(--font-body); font-weight: bold; margin-bottom: 8px; color: var(--primary-color); font-size: 1.1rem; }
      .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 15px; font-family: var(--font-body); font-size: 1rem; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; transition: border-color 0.3s, box-shadow 0.3s; }
      .form-group input[readonly] { background-color: #f1f1f1; cursor: not-allowed; }
      .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 8px rgba(184, 147, 142, 0.5); }
      #submit-button { width: 100%; cursor: pointer; }
      #form-status { margin-top: 20px; font-size: 1rem; text-align: center; min-height: 24px; font-weight: bold; }

      /* === WEDDING GIFT SECTION === */
      .wedding-gift-section {
        margin-top: 60px;
        padding: 30px;
        border-radius: 15px;
        background: rgba(255, 255, 255, 0.7);
        box-shadow: 0 8px 32px 0 rgba(184, 147, 142, 0.2);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        border: 1px solid rgba(255, 255, 255, 0.18);
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }
      .wedding-gift-section h3 {
        font-family: var(--font-heading);
        font-size: 3.5rem;
        color: var(--primary-color-dark);
        margin: 0 0 20px 0;
      }
      .wedding-gift-section p {
        font-size: 1rem;
        margin: 15px 0;
        line-height: 1.6;
      }
      .account-details {
        font-weight: bold;
        color: var(--text-color);
        background: #fdfdfd;
        padding: 10px 15px;
        border-radius: 8px;
        border-left: 4px solid var(--accent-color);
        margin-top: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .account-details:hover {
          background-color: #f5f5f5;
      }
      
      /* === REVAMPED GUESTBOOK STYLES === */
      .guestbook-wrapper {
        max-width: 800px;
        margin: 40px auto 0;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 15px;
        padding: 10px 0; /* Reduced padding */
        box-shadow: 0 8px 32px 0 rgba(184, 147, 142, 0.2);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
      #comments-container {
        margin: 0;
        padding: 0 10px; /* Padding for scrollbar */
        max-height: 500px;
        overflow-y: auto;
        text-align: left;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-color) transparent;
      }
      #comments-container::-webkit-scrollbar { width: 8px; }
      #comments-container::-webkit-scrollbar-track { background: transparent; }
      #comments-container::-webkit-scrollbar-thumb {
        background-color: var(--primary-color);
        border-radius: 10px;
        border: 2px solid rgba(245, 249, 253, 0.8);
      }
      .comment-card {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        padding: 20px 15px;
        border-bottom: 1px solid rgba(0,0,0,0.08);
      }
      .comment-card:last-child {
        border-bottom: none;
      }
      .comment-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: var(--font-body);
        font-weight: 700;
        font-size: 1.4rem;
        flex-shrink: 0;
        text-transform: uppercase;
      }
      .comment-main {
        flex: 1;
      }
      .comment-header { 
        display: flex; 
        align-items: center; 
        margin-bottom: 8px; 
        flex-wrap: wrap; 
        gap: 10px;
      }
      .comment-name { 
        font-family: var(--font-body); 
        font-size: 1.1rem; 
        font-weight: 700;
        color: var(--text-color); 
        margin: 0;
      }
      .comment-status { 
        font-size: 0.85rem; 
        font-weight: 600; 
        padding: 4px 10px; 
        border-radius: 20px; 
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }
      .comment-status svg {
        width: 14px;
        height: 14px;
      }
      .comment-status.attending { background-color: #e0f2f1; color: #00796b; }
      .comment-status.not-attending { background-color: #ffcdd2; color: #c62828; }
      .comment-body { 
        font-size: 1rem; 
        line-height: 1.6; 
        color: var(--text-color); 
        margin: 0; 
        word-wrap: break-word; 
      }
      .loader {
        width: 50px;
        height: 50px;
        border: 5px solid #f3f3f3;
        border-top: 5px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 40px auto;
      }
      .empty-guestbook { text-align: center; padding: 40px 20px; opacity: 0.7; }
      .empty-guestbook h4 { font-family: var(--font-heading); color: var(--primary-color-dark); font-size: 2rem; margin-bottom: 10px; }
      .empty-guestbook p { font-size: 1rem; color: var(--text-color); }
      .error-message { text-align: center; padding: 40px 20px; color: #c62828; font-weight: bold; }
      
      /* === OTHER SECTION STYLES === */
      .event-info { display: flex; justify-content: space-around; flex-wrap: wrap; margin-top: 50px; gap: 40px; }
      .event-info div { flex-basis: 45%; min-width: 300px; }
      .event-info h3 { font-size: 4rem; color: var(--primary-color); margin-bottom: 20px; }
      .event-info p { font-size: 1.1rem; margin: 8px 0; }
      .rsvp-button { display: inline-block; padding: 18px 40px; border-radius: 50px; background-color: var(--primary-color); color: white; text-decoration: none; font-family: var(--font-body); font-size: 1.1rem; font-weight: bold; transition: background-color 0.3s ease, transform 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); border: none; }
      .rsvp-button:hover { background-color: var(--primary-color-dark); transform: translateY(-5px); }
      .timeline { position: relative; max-width: 800px; margin: 0 auto; padding: 40px 0; }
      .timeline::before { content: ""; position: absolute; width: 3px; background-color: #e0c8c5; top: 0; bottom: 0; left: 50%; margin-left: -1.5px; }
      .timeline-item { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; box-sizing: border-box; }
      .timeline-item::after { content: ""; position: absolute; width: 30px; height: 30px; right: -17px; background-color: white; border: 5px solid var(--primary-color); top: 32px; border-radius: 50%; z-index: 1; transition: transform 0.3s ease; }
      .timeline-item:hover::after { transform: scale(1.15); }
      .timeline-left { left: 0; padding-right: 50px; }
      .timeline-right { left: 50%; padding-left: 50px; }
      .timeline-right::after { left: -17px; }
      .timeline-content { padding: 25px 35px; background-color: white; position: relative; border-radius: 8px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); transition: transform 0.3s ease, box-shadow 0.3s ease; }
      .timeline-content:hover { transform: translateY(-8px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12); }
      .timeline-content::before { content: " "; height: 0; position: absolute; top: 38px; width: 0; z-index: 1; border: medium solid white; }
      .timeline-left .timeline-content { text-align: right; }
      .timeline-right .timeline-content { text-align: left; }
      .timeline-left .timeline-content::before { right: -10px; border-width: 10px 0 10px 10px; border-color: transparent transparent transparent white; }
      .timeline-right .timeline-content::before { left: -10px; border-width: 10px 10px 10px 0; border-color: transparent white transparent transparent; }
      .timeline-content h3 { font-size: 2.8rem; color: var(--primary-color); margin: 0 0 10px 0; }
      .timeline-content p { font-size: 1.1rem; margin: 0; font-family: var(--font-body); }
      .faq-item { margin-bottom: 30px; text-align: left; max-width: 700px; margin-left: auto; margin-right: auto; }
      .faq-item h3 { font-size: 2.2rem; color: var(--primary-color); }
      .map-wrapper { margin-top: 60px; }
      .map-wrapper h3 { font-size: 4rem; color: var(--primary-color); margin-bottom: 15px; }
      .map-container { position: relative; overflow: hidden; padding-top: 56.25%; margin-top: 30px; border-radius: 15px; box-shadow: 0 8px 32px 0 rgba(184, 147, 142, 0.2); }
      .map-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
      .map-button { margin-top: 30px; }
      .map-button + .map-button { margin-top: 15px; }
      
      /* === REVAMPED GALLERY CAROUSEL STYLES === */
      .gallery-carousel {
        max-width: 900px;
        max-height: 75vh;
        margin: 40px auto 0;
        position: relative;
        overflow: visible;
        aspect-ratio: 4 / 5;
        padding: 12px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(184, 147, 142, 0.25), 0 0 0 8px rgba(255, 255, 255, 0.5);
      }
      .gallery-slider {
        width: 100%;
        height: 100%;
        position: relative;
        border-radius: 8px;
        overflow: hidden;
      }
      .gallery-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        z-index: 1;
        visibility: hidden;
      }
      .gallery-slide.is-visible {
        opacity: 1;
        z-index: 2;
        visibility: visible;
      }
      .gallery-slide img {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;
        object-position: center 30%;
      }
      @keyframes kenburns-zoom {
        0% { transform: scale(1.05) translateY(0); }
        100% { transform: scale(1.15) translateY(-3px); }
      }
      .gallery-slide.is-visible img {
        animation: kenburns-zoom 12s ease-out forwards;
      }
      .carousel-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: background-color 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
        z-index: 12;
        opacity: 0;
      }
      .gallery-carousel:hover .carousel-btn {
        opacity: 1;
      }
      .carousel-btn:hover {
        background-color: rgba(0, 0, 0, 0.45);
        transform: translateY(-50%) scale(1.05);
      }
      .carousel-btn.prev { left: 25px; }
      .carousel-btn.next { right: 25px; }
      .carousel-btn svg {
        width: 28px;
        height: 28px;
        fill: white;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
      }
      .carousel-ui-overlay {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: auto;
        padding: 8px 10px;
        z-index: 12;
        display: flex;
        align-items: center;
        gap: 15px;
        background: rgba(0, 0, 0, 0.35);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 50px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        box-sizing: border-box;
      }
      .carousel-counter {
        background-color: transparent;
        color: rgba(255, 255, 255, 0.95);
        padding: 0 5px;
        font-size: 0.9rem;
        font-weight: 600;
        white-space: nowrap;
      }
      .carousel-nav {
        display: flex;
        gap: 8px;
        border-left: 1px solid rgba(255, 255, 255, 0.2);
        padding-left: 15px;
        margin-left: -2px;
      }
      .nav-dot {
        width: 9px;
        height: 9px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.4);
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.3s ease;
        border: none;
      }
      .nav-dot.active {
        background-color: white;
        transform: scale(1.1);
      }
      .carousel-progress-bar {
        position: absolute;
        bottom: 12px;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 40px);
        height: 3px;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 3px;
        overflow: hidden;
        z-index: 11;
      }
      .carousel-progress-bar-inner {
        width: 0%;
        height: 100%;
        background-color: white;
        border-radius: 3px;
      }
      @keyframes progress {
        from { width: 0%; }
        to { width: 100%; }
      }

      /* === FOOTER STYLES === */
      footer { padding: 60px 20px 20px; text-align: center; background-color: #383838; color: white; font-family: var(--font-body); font-weight: 300; font-size: 1rem; position: relative; z-index: 1;}
      footer .final-thanks { font-family: var(--font-heading); font-size: 4rem; color: var(--accent-color); margin-bottom: 20px; }
      .footer-divider { width: 200px; height: 1px; background: var(--accent-color); margin: 30px auto; opacity: 0.5; }
      
      /* === FLORAL DECORATIONS === */
      @keyframes realistic-sway-top { 0% { transform: rotate(4deg); } 100% { transform: rotate(-4deg); } }
      @keyframes realistic-sway-bottom { 0% { transform: rotate(-5deg); } 100% { transform: rotate(5deg); } }
      .section::before, .section::after { content: ""; position: absolute; background-size: contain; background-repeat: no-repeat; z-index: 0; pointer-events: none; opacity: 0; transform: translateY(40px) scale(0.8); transition: opacity 1.2s ease-out, transform 1.2s ease-out; transition-delay: 0.3s; }
      .visible.section::before, .visible.section::after { opacity: 0.45; transform: translateY(0) scale(1); }
      .about::before { transform-origin: top left; animation: realistic-sway-top 12s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .about::after { transform-origin: bottom right; animation: realistic-sway-bottom 14s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .details::before { transform-origin: top left; animation: realistic-sway-top 11s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .details::after { transform-origin: bottom right; animation: realistic-sway-bottom 13s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .journey-section::before { transform-origin: top right; animation: realistic-sway-top 14s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .journey-section::after { transform-origin: bottom left; animation: realistic-sway-bottom 12s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .party-section::before { transform-origin: top right; animation: realistic-sway-top 13s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .party-section::after { transform-origin: bottom left; animation: realistic-sway-bottom 11s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .rsvp-section::before, .guestbook-section::before { transform-origin: top left; animation: realistic-sway-top 12s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .rsvp-section::after, .guestbook-section::after { transform-origin: bottom right; animation: realistic-sway-bottom 14s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate; }
      .faq-section::before { transform-origin: top right; animation: realistic-sway-top 11s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .faq-section::after { transform-origin: bottom left; animation: realistic-sway-bottom 13s cubic-bezier(0.45, 0, 0.55, 1) infinite alternate-reverse; }
      .about::before { background-image: url('data/image/Flower1.png'); width: 350px; height: 350px; top: 5%; left: 5%; }
      .about::after { background-image: url('data/image/Flower1.png'); width: 250px; height: 250px; bottom: 5%; right: 5%; }
      .details::before { background-image: url('data/image/Flower1.png'); width: 280px; height: 280px; top: 10%; left: 8%; }
      .details::after { background-image: url('data/image/Flower1.png'); width: 220px; height: 220px; bottom: 10%; right: 8%; }
      .journey-section::before { background-image: url('data/image/Flower2.png'); width: 250px; height: 250px; top: 8%; right: 10%; }
      .journey-section::after { background-image: url('data/image/Flower2.png'); width: 220px; height: 220px; bottom: 8%; left: 10%; }
      .party-section::before { background-image: url('data/image/Flower2.png'); width: 300px; height: 300px; top: 12%; right: 8%; }
      .party-section::after { background-image: url('data/image/Flower2.png'); width: 300px; height: 300px; bottom: 12%; left: 8%; }
      .rsvp-section::before, .guestbook-section::before { background-image: url('data/image/Flower1.png'); width: 240px; height: 240px; top: 10%; left: 12%; }
      .rsvp-section::after, .guestbook-section::after { background-image: url('data/image/Flower1.png'); width: 200px; height: 200px; bottom: 10%; right: 12%; }
      .faq-section::before { background-image: url('data/image/Flower2.png'); width: 260px; height: 260px; top: 12%; right: 10%; }
      .faq-section::after { background-image: url('data/image/Flower2.png'); width: 200px; height: 200px; bottom: 12%; left: 10%; }
      
      /* === SCROLL ANIMATION & NOTIFICATION === */
      #copy-notification {
        position: fixed;
        bottom: -100px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #00796b;
        color: white;
        padding: 15px 30px;
        border-radius: 50px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        z-index: 25000;
        font-family: var(--font-body);
        font-weight: bold;
        font-size: 1rem;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      #copy-notification.show {
        bottom: 30px;
        opacity: 1;
        visibility: visible;
      }
      @keyframes goldPulse { 0% { background-size: 200% 200%; } 50% { background-size: 250% 250%; } 100% { background-size: 200% 200%; } }
      @keyframes sunPulse { 0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); opacity: 0.1; } 50% { transform: translate(-50%, -50%) rotate(180deg) scale(1.05); opacity: 0.15; } 100% { transform: translate(-50%, -50%) rotate(360deg) scale(1); opacity: 0.1; } }
      @keyframes move-clouds { 0% { left: -450px; } 100% { left: 100vw; } }
      @keyframes cloudBob { 0% { transform: translateY(0); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0); } }
      .animated-item { opacity: 0; filter: blur(4px); transform: translateY(50px); transition: opacity 1s cubic-bezier(0.165, 0.84, 0.44, 1), transform 1s cubic-bezier(0.165, 0.84, 0.44, 1), filter 0.8s cubic-bezier(0.165, 0.84, 0.44, 1); }
      .animated-item.visible { opacity: 1; transform: translateY(0); filter: blur(0); }
      .animated-item.visible .animated-child { opacity: 0; transform: translateY(30px); animation: heroContentFadeIn 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards; }
      .animated-item.visible .animated-child:nth-child(1) { animation-delay: 0.2s; }
      .animated-item.visible .animated-child:nth-child(2) { animation-delay: 0.4s; }
      .animated-item.visible .animated-child:nth-child(3) { animation-delay: 0.6s; }
      .animated-item.visible .animated-child:nth-child(4) { animation-delay: 0.8s; }
      .animated-item.visible .animated-child:nth-child(5) { animation-delay: 1.0s; }
      
      /* === START: RESPONSIVE MEDIA QUERIES === */
      
      /* Ultra-Wide Desktops */
      @media (min-width: 1921px) {
        .container { max-width: 1400px; }
        h1 { font-size: 11rem; }
        .section h2 { font-size: 8rem; }
      }
      
      /* Large Desktops */
      @media (min-width: 1601px) and (max-width: 1920px) {
        .container { max-width: 1280px; }
        h1 { font-size: 10rem; }
        .section h2 { font-size: 7.5rem; }
      }
      
      /* Standard Desktops */
      @media (min-width: 1201px) and (max-width: 1600px) {
        .container { max-width: 1100px; }
        h1 { font-size: 9rem; }
        .section h2 { font-size: 7rem; }
      }

      /* Laptops and Large Tablets */
      @media (max-width: 1200px) {
        .container { max-width: 960px; }
        h1 { font-size: 8rem; }
        .section h2 { font-size: 6rem; }
      }
      
      /* Tablets (Portrait) & Small Laptops */
      @media (max-width: 1024px) { 
        body { font-size: 16px; } 
        .section { padding: 70px 20px; } 
        .section h2 { font-size: 5rem; } 
        h1 { font-size: 7rem; line-height: 1.2; }
        .mobile-break { display: block; }
        .hero p { font-size: 1.5rem; } 
        #countdown { gap: 20px; } 
        #countdown div { padding: 12px 20px; min-width: 90px; font-size: 2.5rem; } 
        #countdown span { font-size: 1rem; } 
        .couple-img { width: 225px; height: 225px; }
      }
      
      /* Small Tablets */
      @media (max-width: 900px) {
        .couple-details .person-details h3 { font-size: 4.5rem; }
        .timeline-content h3 { font-size: 2.5rem; }
        .map-wrapper h3 { font-size: 3.8rem; }
      }

      /* Tablets (Landscape) & Large Phones */
      @media (max-width: 768px) {
        body { font-size: 15px; }
        .section { padding: 60px 20px; }
        .section h2 { font-size: 4.5rem; }
        .heading-divider { width: 320px; height: 105px; margin-bottom: 30px; }
        .splash-content h1 { font-size: 5.5rem; }
        .splash-content h2 { font-size: 1.3rem; }
        h1 { font-size: 6rem; line-height: 1.2; }
        .hero p { font-size: 1.3rem; letter-spacing: 3.5px; }
        #countdown div { min-width: 80px; font-size: 2.2rem; }
        #countdown span { font-size: 0.9rem; }
        .couple-details { flex-direction: column; gap: 20px; }
        .couple-details .person-details { text-align: center; }
        .couple-details .person-details h3 { font-size: 4rem; }
        .couple-details .son-daughter-of { font-size: 1rem; margin-bottom: 20px; }
        .couple-images.desktop-only { display: none; }
        .couple-img.mobile-only { display: inline-block; width: 200px; height: 200px; margin: 0 auto; }
        .event-info { flex-direction: column; align-items: center; gap: 35px; }
        .timeline::before { left: 31px; }
        .timeline-item { width: 100%; padding-left: 70px; padding-right: 25px; }
        .timeline-left, .timeline-right { left: 0%; }
        .timeline-left .timeline-content, .timeline-right .timeline-content { text-align: left; }
        .timeline-left::after, .timeline-right::after { left: 15px; }
        .timeline-left .timeline-content::before, .timeline-right .timeline-content::before { left: -10px; border-width: 10px 10px 10px 0; border-color: transparent white transparent transparent; }
        .section::before, .section::after { width: 180px !important; height: 180px !important; opacity: 0.3; }
        .music-control { left: 15px; bottom: 15px; }
        #comments-container { max-height: 400px; }
        .guestbook-wrapper { padding: 10px 0; }
        .map-wrapper h3 { font-size: 3.5rem; }

        .gallery-carousel { padding: 10px; border-radius: 12px; }
        .carousel-ui-overlay, .carousel-progress-bar { display: none; }
        .carousel-btn { width: 45px; height: 45px; opacity: 1; background-color: rgba(0, 0, 0, 0.15); }
        .carousel-btn svg { width: 24px; height: 24px; }
        .carousel-btn.prev { left: 15px; }
        .carousel-btn.next { right: 15px; }
      }
      
      /* Phones (Landscape) */
      @media (max-width: 640px) {
        .section h2 { font-size: 4rem; }
        .splash-content h1 { font-size: 5rem; }
        h1 { font-size: 5.2rem; }
        .couple-details .person-details h3 { font-size: 3.8rem; }
      }

      /* Phones (Portrait) */
      @media (max-width: 480px) {
        body { font-size: 14px; line-height: 1.6; }
        .hero::before { width: 100vh; height: 100vh; opacity: 0.08; }
        .section { padding: 50px 15px; }
        .section h2 { font-size: 3.2rem; }
        .heading-divider { width: 260px; height: 85px; margin-bottom: 25px; }
        .splash-arabic { font-size: 1.4rem; }
        .splash-translation { font-size: 0.9rem; }
        .splash-content h1 { font-size: 4rem; margin-bottom: 25px;}
        .splash-content h2 { font-size: 1.1rem; letter-spacing: 3px; }
        .splash-content p { padding: 0 15px; font-size: 0.95rem; }
        .guest-name { font-size: 1.5rem; }
        #open-invitation-btn { padding: 12px 28px; font-size: 0.9rem; }
        .bismillah { font-size: 2rem; margin-bottom: 15px;}
        h1 { font-size: 4.2rem; line-height: 1.2; }
        .hero p { font-size: 0.9rem; letter-spacing: 3px; margin: 10px 0 25px; }
        #countdown { flex-direction: row; flex-wrap: nowrap; gap: 8px; justify-content: center; width: 100%; box-sizing: border-box; padding: 0 10px; }
        #countdown div { padding: 10px 5px; min-width: 0; flex: 1; font-size: 1.8rem; border-radius: 8px; line-height: 1.1; }
        #countdown span { font-size: 0.65rem; margin-top: 6px; letter-spacing: 1px; word-break: keep-all; }
        .couple-details .person-details h3 { font-size: 3.5rem; }
        .couple-details .son-daughter-of { font-size: 0.9rem; }
        .couple-details .ampersand { font-size: 4rem; }
        .couple-img.mobile-only { width: 180px; height: 180px; }
        
        .gallery-carousel { padding: 8px; border-radius: 10px; }
        .carousel-btn { width: 40px; height: 40px; }
        .carousel-btn.prev { left: 10px; }
        .carousel-btn.next { right: 10px; }

        .container p { font-size: 0.95rem; }
        .timeline-content h3 { font-size: 2rem; }
        .timeline-content p { font-size: 0.9rem; }
        .music-control { bottom: 10px; left: 10px; }
        #music-toggle-btn { width: 50px; height: 50px; }
        .section::before, .section::after { display: none; }
        .song-info { display: none; }
        footer .final-thanks { font-size: 3rem; }
      }
      
      /* Very Small Phones */
      @media (max-width: 360px) {
        .section h2 { font-size: 2.8rem; }
        .splash-content h1 { font-size: 3.5rem; }
        h1 { font-size: 3.8rem; }
        .hero p { font-size: 0.8rem; }
        #countdown div { font-size: 1.5rem; }
        #countdown span { font-size: 0.6rem; }
      }
      
      /* === END: RESPONSIVE MEDIA QUERIES === */
    </style>
  </head>
  <body>
    <div id="orientation-lock-overlay">
      <div class="orientation-overlay-content">
        <h3>Tampilan Terbaik dalam Mode Potret</h3>
        <p>Silakan putar kembali perangkat Anda untuk melanjutkan.</p>
      </div>
    </div>

    <div id="loading-screen">
      <div class="loader-content">
        <div class="loader-monogram">P & F</div>
        <div class="loader-text">Loading...</div>
      </div>
    </div>

    <div id="splash-screen">
      <div class="splash-content">
        <h2>Undangan</h2>
        <p>Pernikahan Pramudya & Feristina.</p>
        <div class="guest-name-wrapper">
          <h3>Kepada Yth. Bapak/Ibu/Saudara/i</h3>
          <h3 class="guest-name">Bapak/Ibu/Saudara/i</h3>
        </div>
        <button id="open-invitation-btn">Buka Undangan</button>
        <blockquote class="splash-quote">
            <p dir="rtl" class="splash-arabic">وَاَنْكِحُوا الْاَيَامٰى مِنْكُمْ وَالصّٰلِحِيْنَ مِنْ عِبَADAKAH وَاِمَاۤىِٕكُمْۗ اِنْ يَّكُوْنُوْا فُقَرَاۤءَ يُغْنِهِمُ اللّٰهُ مِنْ فَضْلِهٖۗ وَاللّٰهُ وَاسِعٌ عَلِيْمٌ</p>
            <p class="splash-translation">"Nikahkanlah orang-orang yang masih membujang di antara kamu dan juga orang-orang yang layak (menikah) dari hamba-hamba sahayamu, baik laki-laki maupun perempuan. Jika mereka miskin, Allah akan memberi kemampuan kepada mereka dengan karunia-Nya. Allah Mahaluas (pemberian-Nya) lagi Maha Mengetahui."<br><strong>- QS An-Nur: 32 -</strong></p>
        </blockquote>
      </div>
    </div>

    <div id="main-content">
       <div class="music-control">
        <button id="music-toggle-btn" aria-label="Toggle Music">
          <div class="sun-rays"></div>
          <div class="album-art-spinner"></div>
          <div class="music-icon-wrapper">
            <svg id="icon-paused" class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            <svg id="icon-playing" class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </div>
        </button>
        <div class="song-info">
          <p class="song-name">Golden Hour (Instrumental)</p>
          <p class="song-artist">Jvke</p>
        </div>
      </div>

      <audio id="background-music" src="data/song/music.mp3" loop></audio>

      <header class="hero">
        <div class="cloud c1"></div><div class="cloud c2"></div><div class="cloud c3"></div><div class="cloud c4"></div>
        <div class="hero-content">
          <p class="bismillah">بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ</p>
          <p>Kami Akan Menikah</p>
          <h1>Pramudya<br class="mobile-break"> & <br class="mobile-break">Feristina</h1>
          <p>30 November 2025</p>
          <div id="countdown">
            <div><div id="days">00</div><span>Hari</span></div>
            <div><div id="hours">00</div><span>Jam</span></div>
            <div><div id="minutes">00</div><span>Menit</span></div>
            <div><div id="seconds">00</div><span>Detik</span></div>
          </div>
          <div id="countdown-end" style="display: none"><h2>Harinya Telah Tiba!</h2></div>
        </div>
      </header>

      <main>
        <section class="section about animated-item">
          <div class="container">
            <h2>Kisah Kami</h2>
            <hr class="heading-divider" />
            
            <div class="couple-details animated-child">
                <div class="groom-details person-details">
                    <h3>Pramudya</h3>
                    <p class="son-daughter-of">Putra dari Bapak Yuhardi & Ibu Amalia Fiora Irma</p>
                    <img src="data/Image/KakYafi1.jpeg" alt="Mempelai Pria" class="couple-img mobile-only" />
                </div>
                <div class="ampersand">&</div>
                <div class="bride-details person-details">
                    <h3>Feristina</h3>
                    <p class="son-daughter-of">Putri dari Bapak Ferry Yanes & Ibu Risma Amalia</p>
                    <img src="data/Image/KakFeris1.jpeg" alt="Mempelai Wanita" class="couple-img mobile-only" />
                </div>
            </div>
            
            <div class="couple-images animated-child desktop-only">
                <img src="data/Image/KakYafi1.jpeg" alt="Mempelai Pria" class="couple-img" />
                <img src="data/Image/KakFeris1.jpeg" alt="Mempelai Wanita" class="couple-img" />
            </div>

            <blockquote style="margin-top: 40px; border: none; padding: 0;" class="animated-child">
              <p dir="rtl" style="font-size: 2rem; color: var(--primary-color-dark); margin-bottom: 20px;">
                وَاللّٰهُ جَعَلَ لَكُمْ مِّنْ اَنْفُسِكُمْ اَزْوَاجًا وَّجَعَلَ لَكُمْ مِّنْ اَزْوَاجِكُمْ بَنِيْنَ وَحَفَدَةً وَّرَزَقَكُمْ مِّنَ الطَّيِّبٰتِۗ اَفَبِالْبَاطِلِ يُؤْمِنُوْنَ وَبِنِعْمَتِ اللّٰهِ هُمْ يَكْفُرُوْنَۙ
              </p>
              <p style="font-size: 1.1rem; font-style: italic; max-width: 700px; margin: 0 auto;">
                "Allah menjadikan bagimu pasangan (suami atau istri) dari jenis kamu sendiri, menjadikan bagimu dari pasanganmu anak-anak dan cucu-cucu, serta menganugerahi kamu rezeki yang baik-baik. Mengapa terhadap yang batil mereka beriman, sedangkan terhadap nikmat Allah mereka ingkar?"
              </p>
              <p style="font-size: 1rem; font-weight: bold; margin-top: 20px;">(QS An-Nahl: 72)</p>
            </blockquote>
          </div>
        </section>

        <section class="section details animated-item">
          <div class="container">
            <h2>Detail Pernikahan</h2>
            <hr class="heading-divider" />
            <div class="event-details">
              <div class="event-info">
                <div class="animated-child">
                  <h3>Akad Nikah</h3>
                  <p>09:00 WIB (Masih Tentatif)</p>
                  <p>Aula Direktorat Jenderal Bina Pemerintahan Desa Kemendagri</p>
                  <p>Jl. Raya Pasar Minggu No.19, Pejaten Barat, Kec. Ps. Minggu, Jakarta Selatan.</p>
                </div>
                <div class="animated-child">
                  <h3>Resepsi</h3>
                  <p>11:00 - 13:00 WIB</p>
                  <p>Aula Direktorat Jenderal Bina Pemerintahan Desa Kemendagri</p>
                  <p>Jl. Raya Pasar Minggu No.19, Pejaten Barat, Kec. Ps. Minggu, Jakarta Selatan</p>
                </div>
              </div>
            </div>
            
            <div class="map-wrapper animated-child">
                <h3>Lokasi Acara</h3>
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d294.77107682859435!2d106.84490926636506!3d-6.270165536103122!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f26c7bf4e5fd%3A0x52ec054280886588!2sKementerian%20Dalam%20Negeri%20-%20Ditjen%20Bina%20Pemerintahan%20Desa!5e0!3m2!1sen!2sid!4v1756023942640!5m2!1sen!2sid" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                <a href="https://maps.app.goo.gl/pB9XnHQSxj8bdVGFA" target="_blank" class="rsvp-button map-button">Buka di Google Maps</a>
                <a href="https://www.google.com/calendar/render?action=TEMPLATE&text=Pernikahan+Pramudya+%26+Feristina&dates=20251130T020000Z/20251130T060000Z&details=Dengan+penuh+rasa+syukur%2C+kami+mengundang+Anda+untuk+hadir+dan+memberikan+doa+restu+pada+acara+pernikahan+kami.%0A%0ADress+code%3A+Semi-formal%2FFormal.&location=Aula+Direktorat+Jenderal+Bina+Pemerintahan+Desa+Kemendagri%2C+Jl.+Raya+Pasar+Minggu+No.19%2C+Pejaten+Barat%2C+Kec.+Ps.+Minggu%2C+Jakarta+Selatan" target="_blank" class="rsvp-button map-button">Simpan ke Kalender</a>
            </div>

          </div>
        </section>

        <section class="section journey-section animated-item">
          <div class="container">
            <h2>Perjalanan Kami</h2>
            <hr class="heading-divider" />
            <div class="timeline">
              <div class="timeline-item timeline-left animated-child"><div class="timeline-content"><h3>Agustus 2017</h3><p>Kisah kami dimulai. Pertemuan tak terduga yang memicu cinta seumur hidup.</p></div></div>
              <div class="timeline-item timeline-right animated-child"><div class="timeline-content"><h3>September 2020</h3><p>Petualangan pertama kami bersama, menjelajahi tempat baru dan menciptakan kenangan.</p></div></div>
              <div class="timeline-item timeline-left animated-child"><div class="timeline-content"><h3>Oktober 2024</h3><p>Lamaran! Momen sempurna yang akan selalu kami kenang selamanya.</p></div></div>
              <div class="timeline-item timeline-right animated-child"><div class="timeline-content"><h3>November 2025</h3><p>Kami mengucapkan janji suci dan memulai babak baru kami sebagai suami dan istri!</p></div></div>
            </div>
          </div>
        </section>

        <section class="section party-section animated-item">
          <div class="container">
            <h2>Galeri Foto</h2>
            <hr class="heading-divider" />
            <div class="gallery-carousel animated-child">
              <div class="gallery-slider">
                <div class="gallery-slide"><img src="data/Image/BerduaMonokrom.jpeg" alt="Pramudya & Feristina 1"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua1.jpeg" alt="Pramudya & Feristina 2"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua2.jpeg" alt="Pramudya & Feristina 3"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua3.jpeg" alt="Pramudya & Feristina 4"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua4.jpeg" alt="Pramudya & Feristina 5"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua5.jpeg" alt="Pramudya & Feristina 6"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua6.jpeg" alt="Pramudya & Feristina 7"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua7.jpeg" alt="Pramudya & Feristina 8"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua8.jpeg" alt="Pramudya & Feristina 9"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua9.jpeg" alt="Pramudya & Feristina 10"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua10.jpeg" alt="Pramudya & Feristina 11"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua11.jpeg" alt="Pramudya & Feristina 12"></div>
                <div class="gallery-slide"><img src="data/Image/Berdua12.jpeg" alt="Pramudya & Feristina 13"></div>
                <div class="gallery-slide"><img src="data/Image/KakYafi2.jpeg" alt="Pramudya 1"></div>
                <div class="gallery-slide"><img src="data/Image/KakYafi3.jpeg" alt="Pramudya 2"></div>
                <div class="gallery-slide"><img src="data/Image/KakYafi4.jpeg" alt="Pramudya 3"></div>
                <div class="gallery-slide"><img src="data/Image/KakFeris1.jpeg" alt="Feristina 2"></div>
                <div class="gallery-slide"><img src="data/Image/KakFeris3.jpeg" alt="Feristina 2"></div>
                <div class="gallery-slide"><img src="data/Image/KakFeris4.jpeg" alt="Feristina 2"></div>
              </div>
              <button class="carousel-btn prev" aria-label="Previous Slide">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
              </button>
              <button class="carousel-btn next" aria-label="Next Slide">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
              </button>
              <div class="carousel-progress-bar">
                <div class="carousel-progress-bar-inner"></div>
              </div>
              <div class="carousel-ui-overlay">
                  <div class="carousel-counter">1 / 19</div>
                  <div class="carousel-nav"></div>
              </div>
            </div>
          </div>
        </section>

        <section class="section rsvp-section animated-item">
          <div class="container">
            <h2>Konfirmasi Kehadiran</h2>
            <hr class="heading-divider" />
            <p class="animated-child">Kehadiran dan doa restu Anda adalah hadiah terindah bagi kami. Mohon konfirmasi kehadiran Anda sebelum 30 November 2025.</p>
            <form id="rsvp-form" class="rsvp-form animated-child">
              <div class="form-group">
                <label for="name">Nama Anda</label>
                <input type="text" id="name" name="name" placeholder="Tulis nama Anda di sini" required />
              </div>
              <div class="form-group">
                <label for="confirmation">Apakah Anda akan hadir?</label>
                <select id="confirmation" name="confirmation" required>
                  <option value="" disabled selected>Pilih salah satu...</option>
                  <option value="Hadir">Ya, saya akan hadir</option>
                  <option value="Tidak Hadir">Maaf, saya tidak bisa hadir</option>
                </select>
              </div>
              <div class="form-group">
                <label for="message">Tulis Ucapan & Doa</label>
                <textarea id="message" name="message" rows="4" placeholder="Bagikan ucapan bahagia Anda untuk kami..." required></textarea>
              </div>
              <button type="submit" id="submit-button" class="rsvp-button">Kirim Pesan</button>
              <p id="form-status"></p>
            </form>

            <div class="wedding-gift-section animated-child" style="animation-delay: 0.8s;">
                <h3>Hadiah Pernikahan</h3>
                <p>Bagi Anda yang ingin memberikan tanda kasih, dapat melakukannya melalui tautan berikut. Terima kasih banyak atas kebaikan Anda.</p>
                <p>
                    Bank Mandiri
                    <span class="account-details" onclick="copyToClipboard('1270013987944')">1270013987944</span>
                </p>
                <p>
                    Gopay
                    <span class="account-details" onclick="copyToClipboard('087771800110')">087771800110</span>
                </p>
            </div>
          </div>
        </section>

        <section class="section guestbook-section animated-item">
          <div class="container">
            <h2>Ucapan & Doa</h2>
            <hr class="heading-divider" />
            <div class="guestbook-wrapper animated-child">
              <div id="comments-container">
                <!-- Comments will be loaded here by JavaScript -->
              </div>
            </div>
          </div>
        </section>

        <section class="section faq-section animated-item">
          <div class="container">
            <h2>Tanya Jawab</h2>
            <hr class="heading-divider" />
            <div class="faq-item animated-child"><h3>Apa aturan berpakaiannya?</h3><p>Kami akan sangat senang jika keluarga dan teman-teman bisa datang dengan berpakaian yang rapi! Aturan berpakaiannya adalah semi-formal atau formal.</p></div>
            <div class="faq-item animated-child"><h3>Apakah boleh memberi hadiah?</h3><p>Boleh, tetapi jika berhalangan hadir dan ingin tetap memberi hadiah, kami sudah menyediakan platform untuk memberi hadiah</p></div>
            <div class="faq-item animated-child"><h3>Apakah tersedia tempat parkir di dekat lokasi?</h3><p>Ya, kami sudah menyediakan tempat parkir untuk mobil dan motor yang cukup luas.</p></div>
          </div>
        </section>
      </main>

      <footer>
        <div class="container">
          <p class="final-thanks">Terima Kasih</p>
          <div class="footer-divider"></div>
          <p>Dengan Cinta, Pramudya & Feristina | 30 November 2025</p>
          <p>Dibuat oleh Kuy F.A.M.</p>
        </div>
      </footer>
    </div>

    <div id="copy-notification">Nomor berhasil disalin!</div>

    <script>
      window.addEventListener('load', () => {
        const loadingScreen = document.getElementById('loading-screen');
        const splashScreen = document.getElementById('splash-screen');
        setTimeout(() => {
            loadingScreen.classList.add('hidden');
            splashScreen.style.opacity = '1'; 
            loadingScreen.addEventListener('transitionend', () => {
                loadingScreen.remove();
            }, { once: true });
        }, 500);
      });

      let notificationTimeout;
      function copyToClipboard(text, element = null) {
        navigator.clipboard.writeText(text).then(() => {
            const notification = document.getElementById('copy-notification');
            if (element) {
                element.textContent = 'Disalin!';
                setTimeout(() => { element.textContent = 'Salin'; }, 2000);
            }
            notification.textContent = 'Berhasil disalin!';
            notification.style.backgroundColor = '#00796b';
            notification.classList.add('show');
            clearTimeout(notificationTimeout);
            notificationTimeout = setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }, (err) => {
            const notification = document.getElementById('copy-notification');
            notification.textContent = 'Gagal menyalin.';
            notification.style.backgroundColor = '#c62828';
            notification.classList.add('show');
            clearTimeout(notificationTimeout);
            notificationTimeout = setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        // --- PREVENT RIGHT-CLICK ON IMAGES ---
        document.addEventListener('contextmenu', event => {
            if (event.target.tagName === 'IMG') {
                event.preventDefault();
            }
        });

        // --- GUEST NAME & AUTO-FILL RSVP FORM ---
        const urlParams = new URLSearchParams(window.location.search);
        const guestName = urlParams.get('to');
        const guestNameElement = document.querySelector('.guest-name');
        const rsvpNameInput = document.getElementById('name');
        
        if (guestName) {
          guestNameElement.textContent = guestName;
          rsvpNameInput.value = guestName;
          rsvpNameInput.setAttribute('readonly', true);
        }
        
        const openBtn = document.getElementById("open-invitation-btn");
        const splashScreen = document.getElementById("splash-screen");
        const splashContent = document.querySelector(".splash-content");
        const mainContent = document.getElementById("main-content");
        const music = document.getElementById("background-music");
        const musicBtn = document.getElementById("music-toggle-btn");

        openBtn.addEventListener("click", () => {
          music.play().then(() => {
            musicBtn.classList.add("is-playing");
          }).catch(() => {
            console.log("Autoplay was prevented by the browser.");
          });

          splashContent.classList.add("closing");
          splashScreen.classList.add("fade-out");
          mainContent.style.display = "block";
          document.body.style.overflowY = "auto";
          setTimeout(() => mainContent.classList.add("visible"), 50);
          splashScreen.addEventListener("transitionend", () => splashScreen.remove());
        });

        const countdown = () => {
          const countDate = new Date("November 30, 2025 00:00:00").getTime();
          const now = new Date().getTime();
          const gap = countDate - now;
          if (gap < 0) {
            if (document.getElementById("countdown")) document.getElementById("countdown").style.display = "none";
            if (document.getElementById("countdown-end")) document.getElementById("countdown-end").style.display = "block";
            clearInterval(countdownInterval);
            return;
          }
          const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;
          const pad = (num) => String(num).padStart(2, "0");
          document.getElementById("days").innerText = pad(Math.floor(gap / day));
          document.getElementById("hours").innerText = pad(Math.floor((gap % day) / hour));
          document.getElementById("minutes").innerText = pad(Math.floor((gap % hour) / minute));
          document.getElementById("seconds").innerText = pad(Math.floor((gap % minute) / second));
        };
        const countdownInterval = setInterval(countdown, 1000);

        const animatedItems = document.querySelectorAll(".animated-item");
        const isMobile = window.innerWidth <= 768;
        const appearOptions = { threshold: 0, rootMargin: isMobile ? "0px 0px -150px 0px" : "0px 0px -200px 0px" };
        const appearOnScroll = new IntersectionObserver((entries, observer) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add("visible");
            observer.unobserve(entry.target);
          });
        }, appearOptions);
        animatedItems.forEach((item) => appearOnScroll.observe(item));

        const toggleMusic = () => {
          music.paused ? music.play() : music.pause();
        };
        music.onplaying = () => musicBtn.classList.add("is-playing");
        music.onpause = () => musicBtn.classList.remove("is-playing");
        musicBtn.addEventListener("click", toggleMusic);

        const rsvpForm = document.getElementById('rsvp-form');
        const submitButton = document.getElementById('submit-button');
        const formStatus = document.getElementById('form-status');
        const commentsContainer = document.getElementById('comments-container');
        const scriptURL = 'https://script.google.com/macros/s/AKfycbytcIYrMIrgHnRuvt22hmwNwgXHV9R_huknN0Txp3ancgl94rEfaSgokWwJ7N1-4k6i/exec';

        // Helper function to generate a color from a string for the avatar
        const getAvatarColor = (name) => {
            let hash = 0;
            if (name.length === 0) return 'hsl(0, 0%, 70%)';
            for (let i = 0; i < name.length; i++) {
                hash = name.charCodeAt(i) + ((hash << 5) - hash);
                hash = hash & hash; // Ensure 32bit integer
            }
            const h = hash % 360;
            return `hsl(${h}, 60%, 75%)`;
        };

        const fetchAndDisplayComments = async () => {
            commentsContainer.innerHTML = '<div class="loader"></div>';
            try {
                const response = await fetch(scriptURL);
                const result = await response.json();
                if (result.result === 'success') {
                    commentsContainer.innerHTML = '';
                    if (result.data.length === 0) {
                        commentsContainer.innerHTML = `<div class="empty-guestbook"><h4>Belum Ada Ucapan</h4><p>Jadilah yang pertama mengirimkan ucapan & doa!</p></div>`;
                        return;
                    }
                    result.data.reverse().forEach(comment => {
                        const card = document.createElement('div');
                        card.className = 'comment-card';
                        
                        const isAttending = comment.confirmation === 'Hadir';
                        const statusClass = isAttending ? 'attending' : 'not-attending';
                        const statusText = isAttending ? 'Akan Hadir' : 'Tidak Hadir';
                        const statusIcon = isAttending 
                            ? `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>`
                            : `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>`;

                        const safeName = String(comment.name || '').replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        const safeMessage = String(comment.message || '').replace(/</g, "&lt;").replace(/>/g, "&gt;");

                        const initial = (safeName || ' ').charAt(0);
                        const avatarColor = getAvatarColor(safeName);

                        card.innerHTML = `
                            <div class="comment-avatar" style="background-color: ${avatarColor};">
                                ${initial}
                            </div>
                            <div class="comment-main">
                                <div class="comment-header">
                                    <h4 class="comment-name">${safeName}</h4>
                                    <span class="comment-status ${statusClass}">${statusIcon} ${statusText}</span>
                                </div>
                                <p class="comment-body">${safeMessage}</p>
                            </div>
                        `;
                        commentsContainer.appendChild(card);
                    });
                } else {
                    commentsContainer.innerHTML = '<p class="error-message">Gagal memuat ucapan. Coba segarkan halaman.</p>';
                }
            } catch (error) {
                commentsContainer.innerHTML = '<p class="error-message">Gagal memuat ucapan. Periksa koneksi Anda.</p>';
            }
        };
        
        rsvpForm.addEventListener('submit', e => {
            e.preventDefault();
            submitButton.disabled = true;
            submitButton.textContent = 'Mengirim...';

            const formData = new FormData(rsvpForm);
            // If a guest name exists from the URL, ensure it's the one being submitted.
            if (guestName) {
                formData.set('name', guestName);
            }
            
            fetch(scriptURL, { method: 'POST', body: formData})
            .then(res => res.json())
            .then(data => {
                if (data.result === 'success') {
                    formStatus.textContent = `Terima kasih, ${guestName || data.name}! Pesan Anda telah terkirim.`;
                    formStatus.style.color = 'green';
                    rsvpForm.reset();
                    if(guestName) { rsvpNameInput.value = guestName; } // Re-fill name after reset
                    fetchAndDisplayComments();
                } else {
                    throw new Error(data.error || 'An unknown error occurred.');
                }
            })
            .catch(error => {
                formStatus.textContent = 'Oops! Terjadi kesalahan. Silakan coba lagi.';
                formStatus.style.color = 'red';
            })
            .finally(() => {
                submitButton.disabled = false;
                submitButton.textContent = 'Kirim Pesan';
            });
        });

        fetchAndDisplayComments();

        // --- NEW ENHANCED GALLERY CAROUSEL LOGIC ---
        const gallery = document.querySelector('.gallery-carousel');
        if (gallery) {
            const slides = Array.from(gallery.querySelectorAll('.gallery-slide'));
            const nextBtn = gallery.querySelector('.carousel-btn.next');
            const prevBtn = gallery.querySelector('.carousel-btn.prev');
            const navContainer = gallery.querySelector('.carousel-nav');
            const counter = gallery.querySelector('.carousel-counter');
            const progressBarInner = gallery.querySelector('.carousel-progress-bar-inner');
            const autoplayIntervalTime = 5000; // 5 seconds
            let currentIndex = 0;
            let autoPlayInterval;

            if (slides.length > 0) {
                // Create dots
                if(navContainer){
                  slides.forEach((_, index) => {
                      const dot = document.createElement('button');
                      dot.classList.add('nav-dot');
                      dot.setAttribute('aria-label', `Go to slide ${index + 1}`);
                      navContainer.appendChild(dot);
                  });
                }
                const dots = navContainer ? Array.from(navContainer.children) : [];

                const updateCarousel = (newIndex) => {
                    slides[currentIndex].classList.remove('is-visible');
                    currentIndex = newIndex;
                    slides[currentIndex].classList.add('is-visible');
                    
                    if(counter) counter.textContent = `${currentIndex + 1} / ${slides.length}`;

                    if(dots.length > 0){
                      dots.forEach(dot => dot.classList.remove('active'));
                      dots[currentIndex].classList.add('active');
                    }

                    if(progressBarInner) {
                      progressBarInner.style.animation = 'none';
                      void progressBarInner.offsetWidth; // Trigger reflow
                      progressBarInner.style.animation = `progress ${autoplayIntervalTime / 1000}s linear forwards`;
                    }
                };

                const stopAutoPlay = () => clearInterval(autoPlayInterval);
                const startAutoPlay = () => {
                    stopAutoPlay();
                    autoPlayInterval = setInterval(() => {
                        const nextIndex = (currentIndex + 1) % slides.length;
                        updateCarousel(nextIndex);
                    }, autoplayIntervalTime);
                };
                
                const handleManualNav = (action) => {
                    stopAutoPlay();
                    action();
                    startAutoPlay();
                };

                nextBtn.addEventListener('click', () => handleManualNav(() => updateCarousel((currentIndex + 1) % slides.length)));
                prevBtn.addEventListener('click', () => handleManualNav(() => updateCarousel((currentIndex - 1 + slides.length) % slides.length)));
                dots.forEach((dot, index) => dot.addEventListener('click', () => handleManualNav(() => updateCarousel(index))));
                
                gallery.addEventListener('mouseenter', stopAutoPlay);
                gallery.addEventListener('mouseleave', startAutoPlay);

                updateCarousel(0); // Initialize first slide
                startAutoPlay(); // Start autoplay
            }
        }
      });
    </script>
  </body>
</html>